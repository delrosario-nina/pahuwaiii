<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pahuwaii Kanban</title>

    <!-- Tailwind CSS  -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Schoolbell&display=swap" rel="stylesheet">


    <!-- Material Symbols -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
    />

    <link rel="stylesheet" href="pahuwaii.css" />
  </head>

  <body class="min-h-screen flex flex-col items-center p-4 md:p-8">
    <!-- topbar -->
    <div class="w-full max-w-7xl flex items-center gap-4 mb-6">

      <h1 id="titleToggle" class="text-2xl md:text-4xl kanban-title tracking-wide font-bold flex-1">
        pahuwaii : 3
      </h1>

      <a href="/auth.html" title="View Profile" class="p-2 rounded-full hover:bg-gray-100 transition-colors duration-200" aria-label="Open profile">
        <span class="material-symbols-outlined text-4xl cursor-pointer">account_circle</span>
      </a>
    </div>

    <!-- MAIN CONTAINER -->
    <div
      id="mainContainer"
      class="bg-white shadow-2xl w-full max-w-7xl flex flex-col border-2 border-black rounded flex-grow overflow-hidden"
      style="min-height: calc(100vh - 220px);"
    >
      <!-- top toolbar: add icon at left, sort on right -->
      <div class="flex items-center justify-between px-4 md:px-6 py-3 border-b-2 border-black">
        <div class="flex items-center gap-3">
          <button
            id="showFormBtn"
            class="flex items-center justify-center text-black font-bold rounded-full w-10 h-10 text-3xl hover:bg-gray-100 transition-colors"
            title="Add Task"
          >
            <span class="material-symbols-outlined" style="font-size: 28px">add_circle</span>
          </button>
        </div>

        <div class="flex items-center gap-3">
          <select
            id="sortBy"
            class="border-2 border-black px-3 py-2 text-sm rounded hover:bg-gray-50 transition-colors cursor-pointer"
          >
            <option value="date_added">Date Added</option>
            <option value="due_date">Due Date</option>
            <option value="priority">Priority</option>
          </select>
        </div>
      </div>

      <!-- KANBAN COLUMNS: responsive, each column scrolls -->
      <div class="flex flex-col md:flex-row gap-4 flex-1 p-4 md:p-6 min-h-0 overflow-auto md:overflow-visible">
        <div class="flex-1 md:max-w-[33%] min-w-0 md:min-h-0">
          <div class="bg-[#FFEEEE] border-2 border-black p-4 flex flex-col h-full md:h-[calc(100vh-300px)] rounded min-h-[300px]">
            <h2 class="font-bold text-xl kanban-title mb-4 text-black">To Do</h2>
            <div id="notStartedTasks" class="kanban-scroll flex-1 pr-2 overflow-y-auto"></div>
          </div>
        </div>

        <div class="flex-1 md:max-w-[33%] min-w-0 md:min-h-0">
          <div class="bg-[#FFFEEB] border-2 border-black p-4 flex flex-col h-full md:h-[calc(100vh-300px)] rounded min-h-[300px]">
            <h2 class="font-bold text-xl kanban-title mb-4 text-black">In Progress</h2>
            <div id="inProgressTasks" class="kanban-scroll flex-1 pr-2 overflow-y-auto"></div>
          </div>
        </div>

        <div class="flex-1 md:max-w-[33%] min-w-0 md:min-h-0">
          <div class="bg-[#F0FDEC] border-2 border-black p-4 flex flex-col h-full md:h-[calc(100vh-300px)] rounded min-h-[300px]">
            <h2 class="font-bold text-xl kanban-title mb-4 text-black">Done</h2>
            <div id="doneTasks" class="kanban-scroll flex-1 pr-2 overflow-y-auto"></div>
          </div>
        </div>
      </div>

      <!-- progress bar -->
      <div class="w-full h-6 border-t-2 border-black">
        <div id="progressBar" class="h-6 bg-black transition-all duration-500" style="width: 0%"></div>
      </div>
    </div>
    <!-- END OF MAIN CONTAINER -->

    <!-- ADD TASK -->
    <div
      id="taskModal"
      class="fixed inset-0 bg-black/40 hidden flex items-center justify-center z-50 rounded"
    >
      <div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-md">
        <h2 class="text-2xl kanban-title font-bold mb-4">Add Task</h2>
        <form id="taskForm" class="grid grid-cols-1 gap-3">
          <input
            type="text"
            id="name"
            placeholder="Task name"
            required
            class="border p-2 rounded"
          />
          <input type="date" id="due_date" class="border p-2 rounded" />
          <input type="time" id="due_time" class="border p-2 rounded" />
          <select id="priority" class="border p-2 rounded">
            <option value="do now">Important & Urgent [Do now]</option>
            <option value="do next">Not Important & Urgent [Do next]</option>
            <option value="do later">Important & Not Urgent [Do later]</option>
            <option value="do last">
              Not Important & Not Urgent [Do last]
            </option>
          </select>
          <div class="flex justify-end gap-2 mt-4">
            <button
              type="button"
              id="cancelBtn"
              class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-4 py-2 bg-[#32AA0E] text-white hover:bg-[#27840B] rounded"
            >
              Add
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- EDIT TASK -->
    <div
      id="editTaskModal"
      class="fixed inset-0 bg-black/40 hidden flex items-center justify-center z-50 rounded"
    >
      <div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-md">
        <h2 class="text-2xl kanban-title font-bold mb-4">Edit Task</h2>
        <form id="editTaskForm" class="grid grid-cols-1 gap-3">
          <input
            type="text"
            id="edit_name"
            placeholder="Task name"
            required
            class="border p-2 rounded"
          />
          <input type="date" id="edit_due_date" class="border p-2 rounded" />
          <input type="time" id="edit_due_time" class="border p-2 rounded" />
          <select id="edit_priority" class="border p-2 rounded">
            <option value="do now">Do now</option>
            <option value="do next">Do next</option>
            <option value="do later">Do later</option>
            <option value="do last">Do last</option>
          </select>
          <select id="edit_status" class="border p-2 rounded">
            <option value="to do">To Do</option>
            <option value="in progress">In progress</option>
            <option value="done">Done</option>
          </select>
          <div class="flex justify-end gap-2 mt-4">
            <button
              type="button"
              id="cancelEditTaskBtn"
              class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-4 py-2 bg-[#3f403f] text-white hover:bg-black rounded"
            >
              Update
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- DELETE TASK -->
    <div
      id="deleteModal"
      class="fixed inset-0 hidden bg-black/40 flex items-center justify-center z-50"
    >
      <div class="bg-white p-6 rounded-xl shadow-xl max-w-sm w-full">
        <h3 class="text-xl font-bold mb-4">Confirm Delete</h3>
        <p class="mb-6">Are you sure you want to delete this task?</p>
        <div class="flex justify-end gap-3">
          <button
            id="cancelDeleteBtn"
            class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded"
          >
            Cancel
          </button>
          <button
            id="confirmDeleteBtn"
            class="px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded"
          >
            Delete
          </button>
        </div>
      </div>
    </div>

    <!-- UNDO -->
    <div
      id="undoBanner"
      class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-black text-white px-4 py-2 rounded shadow-lg flex items-center gap-4"
    >
      <span>Task deleted</span>
      <button id="undoBtn" class="bg-white text-black px-2 py-1 rounded">
        Undo
      </button>
    </div>

    <!-- js script -->
    <script src="pahuwaii.js"></script>
  </body>
</html>
